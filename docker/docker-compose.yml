# Compose file reference: https://docs.docker.com/compose/compose-file/
# NOTE: Before running, make sure you created web/ssl.crt and web/ssl.key files (see web/Dockerfile for more info)
version: "3.2"
services:
    tightblog-web:
      build:
          context: ..
          dockerfile: ./docker/web/Dockerfile
      restart: on-failure
      environment:
        SITE_ABSOLUTEURL: https://localhost/tightblog
      ports:
# TightBlog configured to require SSL, uses port 8443 internally, 443 externally
#  (i.e., can view on host at https://localhost/tightblog)
        - "443:8443"

      volumes:
# TightBlog uses a named volume to store media images and the blog search index
# Subfolders for both are configured in the web/application-tbcustom.properties file.
        - tightblog-data:/tightblog-data



volumes:
    tightblog-data:
